(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();const u=typeof window<"u"&&window.KLEO_API_BASE?window.KLEO_API_BASE:"http://localhost:5000";async function l(t,e={}){const o=await fetch(`${u}${t}`,{headers:{"Content-Type":"application/json"},...e});if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.json()}const i=(t,e=document)=>e.querySelector(t),f=(t,e=document)=>Array.from(e.querySelectorAll(t)),c={services:[{id:"svc1",name:"Női hajvágás",description:"Szárítással, tanácsadással.",price:6900},{id:"svc2",name:"Férfi hajvágás",description:"Klasszikus vagy modern fazon.",price:4900},{id:"svc3",name:"Gél lakkozás",description:"Tartós, fényes körmök.",price:5500},{id:"svc4",name:"Arckezelés",description:"Bőrdiagnosztikával.",price:12900},{id:"svc5",name:"Szempilla lifting",description:"Hosszan tartó ív.",price:11900},{id:"svc6",name:"Szemöldök styling",description:"Formázás, festés.",price:5900}],salons:[{id:"sal1",name:"Kleopátra – Astoria",address:"Budapest, Károly krt. 1.",phone:"+36 1 234 5678"},{id:"sal2",name:"Kleopátra – Nyugati",address:"Budapest, Teréz krt. 55.",phone:"+36 1 876 5432"},{id:"sal3",name:"Kleopátra – Gyöngyös",address:"Gyöngyös, Fő tér 3.",phone:"+36 37 555 555"},{id:"sal4",name:"Kleopátra – Debrecen",address:"Debrecen, Piac u. 2.",phone:"+36 52 123 456"}]};function d(t){const e=i("#servicesGrid");e&&(e.innerHTML="",t.forEach(o=>{const n=document.createElement("article");n.className="card",n.innerHTML=`
      <h3>${o.name}</h3>
      <p class="desc">${o.description??""}</p>
      <div class="price">${Intl.NumberFormat("hu-HU").format(o.price)} Ft</div>
      <button class="btn btn-primary" data-sid="${o.id}">Foglalok</button>
    `,e.appendChild(n)}),f(".card button").forEach(o=>{o.addEventListener("click",()=>{const n=o.getAttribute("data-sid")??"",s=i("#serviceSelect");if(s&&n){s.value=n;const r=i("#booking");r&&window.scrollTo({top:r.offsetTop-60,behavior:"smooth"})}})}))}function p(t){const e=i("#salonList");if(!e)return;e.innerHTML="",t.forEach(n=>{const s=document.createElement("div");s.className="salon-item",s.innerHTML=`
      <h4>${n.name}</h4>
      <div class="meta">${n.address??""}</div>
      <div class="meta">${n.phone?"Tel: "+n.phone:""}</div>
    `,e.appendChild(s)});const o=i("#salonSelect");o&&(o.innerHTML='<option value="">– Válassz –</option>'+t.map(n=>`<option value="${n.id}">${n.name}</option>`).join(""))}async function m(){const t=i("#serviceSelect");try{const e=await l("/api/services?limit=6"),o=Array.isArray(e)?e:(e==null?void 0:e.services)??[];d(o),t&&(t.innerHTML='<option value="">– Válassz –</option>'+o.map(n=>`<option value="${n.id}">${n.name}</option>`).join(""))}catch{d(c.services),t&&(t.innerHTML='<option value="">– Válassz –</option>'+c.services.map(e=>`<option value="${e.id}">${e.name}</option>`).join(""))}}async function y(){try{const t=await l("/api/salons"),e=Array.isArray(t)?t:(t==null?void 0:t.salons)??[];p(e)}catch{p(c.salons)}}function v(){const t=i("#navToggle"),e=i("#mainNav");!t||!e||t.addEventListener("click",()=>{const o=e.classList.toggle("open");t.setAttribute("aria-expanded",o?"true":"false");const n=t.querySelectorAll("span");o?(n[0].style.transform="translateY(7px) rotate(45deg)",n[1].style.opacity="0",n[2].style.transform="translateY(-7px) rotate(-45deg)"):(n[0].style.transform="",n[1].style.opacity="",n[2].style.transform="")})}function g(){const t=i("#cookiebar"),e=i("#cookieAccept");if(!t||!e)return;if(localStorage.getItem("kleo_cookie_ok")){t.style.display="none";return}e.addEventListener("click",()=>{localStorage.setItem("kleo_cookie_ok","1"),t.remove()})}function h(){const t=new Date().getFullYear(),e=i("#year");e&&(e.textContent=String(t))}function b(){const t=i("#bookingForm"),e=i("#bookingMsg");!t||!e||t.addEventListener("submit",async o=>{o.preventDefault(),e.textContent="Foglalás küldése...";const n=new FormData(t),s=Object.fromEntries(n.entries());try{await l("/api/appointments",{method:"POST",body:JSON.stringify(s)}),e.textContent="Köszönjük! Hamarosan visszaigazoljuk.",t.reset()}catch{e.textContent="Hiba történt. Próbáld újra később."}})}document.addEventListener("DOMContentLoaded",()=>{h(),v(),g(),m(),y(),b()});
