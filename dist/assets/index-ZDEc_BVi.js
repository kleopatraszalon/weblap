(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();const u=typeof window<"u"&&window.KLEO_API_BASE?window.KLEO_API_BASE:"http://localhost:5000";async function l(e,t={}){const o=await fetch(`${u}${e}`,{headers:{"Content-Type":"application/json"},...t});if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.json()}const i=(e,t=document)=>t.querySelector(e),m=(e,t=document)=>Array.from(t.querySelectorAll(e)),c={services:[{id:"svc1",name:"Női hajvágás",description:"Szárítással, tanácsadással.",price:6900},{id:"svc2",name:"Férfi hajvágás",description:"Klasszikus vagy modern fazon.",price:4900},{id:"svc3",name:"Gél lakkozás",description:"Tartós, fényes körmök.",price:5500},{id:"svc4",name:"Arckezelés",description:"Bőrdiagnosztikával.",price:12900},{id:"svc5",name:"Szempilla lifting",description:"Hosszan tartó ív.",price:11900},{id:"svc6",name:"Szemöldök styling",description:"Formázás, festés.",price:5900}],salons:[{id:"sal1",name:"Kleopátra – Astoria",address:"Budapest, Károly krt. 1.",phone:"+36 1 234 5678"},{id:"sal2",name:"Kleopátra – Nyugati",address:"Budapest, Teréz krt. 55.",phone:"+36 1 876 5432"},{id:"sal3",name:"Kleopátra – Gyöngyös",address:"Gyöngyös, Fő tér 3.",phone:"+36 37 555 555"},{id:"sal4",name:"Kleopátra – Debrecen",address:"Debrecen, Piac u. 2.",phone:"+36 52 123 456"}]};function f(e){return Array.isArray(e)}function y(e){return typeof e=="object"&&e!==null&&"services"in e}function g(e){return Array.isArray(e)}function v(e){return typeof e=="object"&&e!==null&&"salons"in e}function d(e){const t=i("#servicesGrid");t&&(t.innerHTML="",e.forEach(o=>{const n=document.createElement("article");n.className="card",n.innerHTML=`
      <h3>${o.name}</h3>
      <p class="desc">${o.description??""}</p>
      <div class="price">${Intl.NumberFormat("hu-HU").format(o.price)} Ft</div>
      <button class="btn btn-primary" data-sid="${o.id}">Foglalok</button>
    `,t.appendChild(n)}),m(".card button").forEach(o=>{o.addEventListener("click",()=>{const n=o.getAttribute("data-sid")??"",s=i("#serviceSelect");if(s&&n){s.value=n;const r=i("#booking");r&&window.scrollTo({top:r.offsetTop-60,behavior:"smooth"})}})}))}function p(e){const t=i("#salonList");if(!t)return;t.innerHTML="",e.forEach(n=>{const s=document.createElement("div");s.className="salon-item",s.innerHTML=`
      <h4>${n.name}</h4>
      <div class="meta">${n.address??""}</div>
      <div class="meta">${n.phone?"Tel: "+n.phone:""}</div>
    `,t.appendChild(s)});const o=i("#salonSelect");o&&(o.innerHTML='<option value="">– Válassz –</option>'+e.map(n=>`<option value="${n.id}">${n.name}</option>`).join(""))}async function h(){const e=i("#serviceSelect");try{const t=await l("/api/services?limit=6"),o=f(t)?t:y(t)?t.services:[];d(o),e&&(e.innerHTML='<option value="">– Válassz –</option>'+o.map(n=>`<option value="${n.id}">${n.name}</option>`).join(""))}catch{d(c.services),e&&(e.innerHTML='<option value="">– Válassz –</option>'+c.services.map(t=>`<option value="${t.id}">${t.name}</option>`).join(""))}}async function b(){try{const e=await l("/api/salons"),t=g(e)?e:v(e)?e.salons:[];p(t)}catch{p(c.salons)}}function k(){const e=i("#navToggle"),t=i("#mainNav");!e||!t||e.addEventListener("click",()=>{const o=t.classList.toggle("open");e.setAttribute("aria-expanded",o?"true":"false");const n=e.querySelectorAll("span");o?(n[0].style.transform="translateY(7px) rotate(45deg)",n[1].style.opacity="0",n[2].style.transform="translateY(-7px) rotate(-45deg)"):(n[0].style.transform="",n[1].style.opacity="",n[2].style.transform="")})}function S(){const e=i("#cookiebar"),t=i("#cookieAccept");if(!e||!t)return;if(localStorage.getItem("kleo_cookie_ok")){e.style.display="none";return}t.addEventListener("click",()=>{localStorage.setItem("kleo_cookie_ok","1"),e.remove()})}function L(){const e=new Date().getFullYear(),t=i("#year");t&&(t.textContent=String(e))}function w(){const e=i("#bookingForm"),t=i("#bookingMsg");!e||!t||e.addEventListener("submit",async o=>{o.preventDefault(),t.textContent="Foglalás küldése...";const n=new FormData(e),s=Object.fromEntries(n.entries());try{await l("/api/appointments",{method:"POST",body:JSON.stringify(s)}),t.textContent="Köszönjük! Hamarosan visszaigazoljuk.",e.reset()}catch{t.textContent="Hiba történt. Próbáld újra később."}})}document.addEventListener("DOMContentLoaded",()=>{L(),k(),S(),h(),b(),w()});function A(){const e=["/images/images_1.webp","/images/images_2.webp","/images/images_3.webp","/images/images_4.webp"];let t=0;const o=document.getElementById("heroImage");o&&setInterval(()=>{t=(t+1)%e.length,o.src=e[t]},4500)}document.addEventListener("DOMContentLoaded",()=>{A()});
